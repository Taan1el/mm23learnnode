"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getExtensions = getExtensions;

var _loaderUtils = require("loader-utils");

var _constants = require("../constants");

var _getImportStr = require("../utils/get-import-str");

var _toVar = require("../utils/to-var");

var _getModuleOutput = require("./get-module-output");

function getExtensions(extensions) {
  function imports(loaderContext, esModule) {
    return extensions.map(([name, importPath]) => {
      const importVar = (0, _toVar.toVar)(`${_constants.IMPORTS_PREFIX}_ext_${name}`);
      const importStatement = (0, _getImportStr.getImportStr)((0, _loaderUtils.stringifyRequest)(loaderContext, importPath), esModule)(importVar);
      return `
            ${importStatement}
            ${_constants.TEMPLATE_DEPENDENCIES}.extensions['${name}'] = {
                module: ${(0, _getModuleOutput.getModuleOutput)(importVar)}
            };`;
    }).join('');
  }

  return {
    imports
  };
}