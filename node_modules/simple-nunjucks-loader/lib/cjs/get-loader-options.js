"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getLoaderOptions = getLoaderOptions;

var _schema = _interopRequireDefault(require("./schema"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function getLoaderOptions(loader, callback) {
  let loaderOptions;

  try {
    loaderOptions = loader.getOptions(_schema.default);
  } catch (e) {
    callback(e);
    return null;
  }

  for (const key in _schema.default.properties) {
    if (!Object.prototype.hasOwnProperty.call(_schema.default.properties, key) || key in loaderOptions) {
      continue;
    }

    const schemaProp = _schema.default.properties[key];

    if (!('default' in schemaProp)) {
      continue;
    }

    loaderOptions[key] = schemaProp['default'];
  }

  return loaderOptions;
}